{{define "content"}}
<div class="content-wrapper">
    <div class="content-header">
        <h1>{{.profileUser.Username}}'s Profile</h1>
        <div class="breadcrumb">
            <a href="/">Home</a> &rsaquo; 
            {{.profileUser.Username}}'s Profile
        </div>
    </div>
    
    <div class="content-body">
        <div class="profile-header">
            <div class="propic-container">
                <a href="/profile/picture" title="Change Profile Picture">
                    {{if .profileUser.ProfilePicURL}}
                        <img src="/assets/{{.profileUser.ProfilePicURL}}" alt="{{.profileUser.Username}}'s avatar" class="avatar">
                        {{if and .user (eq .user.ID .profileUser.ID)}}
                        <form method="POST" action="/profile/picture/delete" class="mt-10">
                            <button type="submit" class="btn btn-sm btn-danger">Remove Picture</button>
                        </form>
                        {{end}}
                    {{else}}
                        <div class="no-avatar">
                            {{substr .profileUser.Username 0 1 | upper}}
                        </div>
                    {{end}}
                </a>
            </div>
            
            <div class="profile-container">
                <h2 class="generic-title">{{.profileUser.Username}}</h2>
                
                <div class="mb-15">
                    <strong>User Type:</strong> 
                    <span class="user-{{.profileUser.UserType.String}}">{{.profileUser.UserType.String | title}}</span>
                </div>
                
                {{if .profileUser.Motto}}
                <div class="mb-15">
                    <strong>Motto:</strong> 
                    <em>"{{.profileUser.Motto}}"</em>
                </div>
                {{end}}
                
                <div class="mb-15">
                    <strong>Joined:</strong> {{.profileUser.CreatedAt.Format "January 2, 2006"}}
                </div>
                
                {{if .profileUser.IsBanned}}
                <div class="mb-15">
                    <strong>Status:</strong> 
                    <span class="user-banned">ðŸš« Banned</span>
                    {{if .profileUser.BanReason}}
                        <br><strong>Reason:</strong> {{.profileUser.BanReason}}
                    {{end}}
                    {{if .profileUser.BannedUntil}}
                        <br><strong>Until:</strong> {{.profileUser.BannedUntil.Format "2006-01-02 15:04"}}
                    {{else}}
                        <br><strong>Duration:</strong> Permanent
                    {{end}}
                </div>
                {{end}}
                
                {{if and .user (eq .user.ID .profileUser.ID)}}
                <div class="mt-30">
                    <a href="/profile/edit" class="btn">Edit Profile</a>
                </div>
                {{if eq .profileUser.UserType 0}}
                <div class="mt-15 alert alert-warning">
                    <strong>Reminder:</strong> Your email is not verified.
                    <form method="POST" action="/auth/resend-verification" style="display:inline;">
                        <button type="submit" class="btn btn-warning btn-sm ml-10">Resend Verification Email</button>
                    </form>
                </div>
                {{end}}
                {{end}}
            </div>
        </div>
        
        {{if .profileUser.Signature}}
        <div class="signature">
            <h3 class="generic-title">Signature</h3>
            <div class="signature-container">
                {{.profileUser.Signature | safeHTML}}
            </div>
        </div>
        {{end}}
    </div>
</div>
{{end}}
